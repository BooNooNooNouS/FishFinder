import{r as s,i as e,j as l,bS as w}from"./vendor-DM3YzW4g.js";import{u as h,a as I,b as y,A as E}from"./UseForm-Dpdzd-Qg.js";import{u as U,R as V,L as N,a as O,I as z}from"./InvenTreeTable-CvoMTeKF.js";import{D as B,b as Q,G as j,A as i,U as m,e as q}from"./index-620rTnyc.js";import{u as p}from"./CommonForms-C4Uv5mOJ.js";import"./DesktopAppView-ImH9xPLk.js";import"./ThemeContext-D5ZWpaIU.js";import"./ActionButton-t5SfA8IW.js";import"./index-DOtB5fjC.js";import"./QRCode-Dvpr48_R.js";import"./browser-BJvvAuRs.js";function et(){const o=U("customstates"),r=B(),_=s.useCallback((t,c)=>{const u=Object.values(r.status??{}).find(d=>d.status_class===t),a=Object.values((u==null?void 0:u.values)??{}).find(d=>d.key===c);return(a==null?void 0:a.label)??(a==null?void 0:a.name)??""},[r]),n=Q(),T=s.useMemo(()=>[{name:"reference_status",label:e._({id:"TGcVE+"}),field_type:"choice",choices:Object.values(r.status??{}).map(t=>({label:t.status_class,value:t.status_class}))}],[r]),g=s.useMemo(()=>[{accessor:"reference_status",title:e._({id:"uAQUqI"}),sortable:!0},{accessor:"logical_key",title:e._({id:"Iz1I4v"}),sortable:!0,render:t=>{const c=_(t.reference_status,t.logical_key);return c||t.logical_key}},{accessor:"name",title:e._({id:"sJGljQ"}),sortable:!0},{accessor:"label",title:e._({id:"0gS7M5"}),sortable:!0},{accessor:"key",sortable:!0},{accessor:"color",render:t=>l.jsx(w,{color:j[t.color]||j.default,variant:"filled",size:"xs",children:t.color})}],[_]),D=p(),F=p(),M=p(),[R,b]=s.useState({}),S=h({url:i.custom_state_list,title:e._({id:"vTGxVN"}),fields:D,table:o}),C=h({url:i.custom_state_list,title:e._({id:"vTGxVN"}),fields:F,initialData:R,table:o}),[f,k]=s.useState(void 0),A=I({url:i.custom_state_list,pk:f,title:e._({id:"/viGTM"}),fields:M,table:o}),x=y({url:i.custom_state_list,pk:f,title:e._({id:"Yrs5A6"}),table:o}),v=s.useCallback(t=>[V({hidden:!n.hasChangeRole(m.admin),onClick:()=>{k(t.pk),A.open()}}),N({hidden:!n.hasAddRole(m.admin),onClick:()=>{b(t),C.open()}}),O({hidden:!n.hasDeleteRole(m.admin),onClick:()=>{k(t.pk),x.open()}})],[n]),G=s.useMemo(()=>[l.jsx(E,{onClick:()=>{b({}),S.open()},tooltip:e._({id:"vTGxVN"})},"add")],[]);return l.jsxs(l.Fragment,{children:[S.modal,A.modal,C.modal,x.modal,l.jsx(z,{url:q(i.custom_state_list),tableState:o,columns:g,props:{rowActions:v,tableActions:G,tableFilters:T,enableDownload:!0}})]})}export{et as default};
//# sourceMappingURL=CustomStateTable-C8BEJI2M.js.map
