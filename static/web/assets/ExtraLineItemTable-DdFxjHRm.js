import{r as i,i as a,j as r}from"./vendor-DM3YzW4g.js";import{u as y,a as D,b as S,A as w}from"./UseForm-TWh6_feP.js";import{u as F,R as I,L as R,a as E,I as j}from"./InvenTreeTable-Dtz5z1-X.js";import{b as M,e as T}from"./index-D337eai7.js";import{b as f}from"./formatters-DcPgPpLg.js";import{e as k}from"./CommonForms-BLD2bvwT.js";import{D as g,c as v,N as K,L as N}from"./ColumnRenderers-B1TW1pd2.js";function Z({endpoint:o,orderId:m,orderDetailRefresh:c,currency:x,role:t}){const n=F("extra-line-item"),s=M(),A=i.useMemo(()=>[{accessor:"reference",switchable:!1},g({}),v({accessor:"quantity",switchable:!1}),{accessor:"price",title:a._({id:"vWelsN"}),render:e=>f(e.price,{currency:e.price_currency})},{accessor:"total_price",title:a._({id:"KyZVKD"}),render:e=>f(e.price,{currency:e.price_currency,multiplier:e.quantity})},K({accessor:"notes"}),N({accessor:"link"})],[]),[h,u]=i.useState({}),[p,d]=i.useState(0),l=y({url:o,title:a._({id:"pwb7Yo"}),fields:k(),initialData:{...h,price_currency:x},onFormSuccess:c,table:n}),b=D({url:o,pk:p,title:a._({id:"vgosWS"}),fields:k(),onFormSuccess:c,table:n}),C=S({url:o,pk:p,title:a._({id:"tpKh8C"}),onFormSuccess:c,table:n}),L=i.useCallback(e=>[I({hidden:!s.hasChangeRole(t),onClick:()=>{d(e.pk),b.open()}}),R({hidden:!s.hasAddRole(t),onClick:()=>{u({...e}),l.open()}}),E({hidden:!s.hasDeleteRole(t),onClick:()=>{d(e.pk),C.open()}})],[s,t]),_=i.useMemo(()=>[r.jsx(w,{tooltip:a._({id:"xnxWkO"}),hidden:!s.hasAddRole(t),onClick:()=>{u({order:m}),l.open()}},"add-line-item")],[s,t]);return r.jsxs(r.Fragment,{children:[l.modal,b.modal,C.modal,r.jsx(j,{tableState:n,url:T(o),columns:A,props:{params:{order:m},rowActions:L,tableActions:_}})]})}export{Z as E};
//# sourceMappingURL=ExtraLineItemTable-DdFxjHRm.js.map
