import{r as s,i as o,j as n}from"./vendor-DM3YzW4g.js";import{J as w,a as k,u as x,b as g,A as j}from"./UseForm-Dpdzd-Qg.js";import{u as y,R as D,a as F,I as T}from"./InvenTreeTable-CvoMTeKF.js";import{b as E,h as S,m as U,A as c,U as a,e as v}from"./index-620rTnyc.js";import{a as I}from"./ThemeContext-D5ZWpaIU.js";function J({companyId:i,params:_}){const t=E(),f=I(),r=y("contact"),A=s.useMemo(()=>{const e=[{accessor:"name",sortable:!0,switchable:!1},{accessor:"phone",switchable:!0,sortable:!1},{accessor:"email",switchable:!0,sortable:!1},{accessor:"role",switchable:!0,sortable:!1}];return i===void 0&&e.unshift({accessor:"company_name",title:o._({id:"7i8j3G"}),sortable:!1,switchable:!0,render:l=>n.jsx(w,{primary:l.company_name,url:S(U.company,l.company),navigate:f})}),e},[]),d=s.useMemo(()=>({company:{},name:{},phone:{},email:{},role:{}}),[]),[u,m]=s.useState(0),p=k({url:c.contact_list,pk:u,title:o._({id:"mQpWAe"}),fields:d,onFormSuccess:e=>r.updateRecord(e)}),h=x({url:c.contact_list,title:o._({id:"M0FgOk"}),initialData:{company:i},fields:d,table:r}),b=g({url:c.contact_list,pk:u,title:o._({id:"0oMKRL"}),table:r}),C=s.useCallback(e=>{const l=t.hasChangeRole(a.purchase_order)||t.hasChangeRole(a.sales_order),M=t.hasDeleteRole(a.purchase_order)||t.hasDeleteRole(a.sales_order);return[D({hidden:!l,onClick:()=>{m(e.pk),p.open()}}),F({hidden:!M,onClick:()=>{m(e.pk),b.open()}})]},[t]),R=s.useMemo(()=>{const e=t.hasAddRole(a.purchase_order)||t.hasAddRole(a.sales_order);return[n.jsx(j,{tooltip:o._({id:"QsNWTM"}),onClick:()=>h.open(),hidden:!e},"add-contact")]},[t]);return n.jsxs(n.Fragment,{children:[h.modal,p.modal,b.modal,n.jsx(T,{url:v(c.contact_list),tableState:r,columns:A,props:{enableDownload:!0,rowActions:C,tableActions:R,params:{..._,company:i}}})]})}export{J as C};
//# sourceMappingURL=ContactTable-DiSYqbYq.js.map
